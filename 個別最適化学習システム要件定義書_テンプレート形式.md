# 個別最適化学習システム Azure OpenAI RAG・エージェントシステム要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
- **システム名**：個別最適化学習システム（Individual Optimization Learning System）
- **プロジェクト期間**：2025年8月～2026年8月（12ヶ月）
- **担当者**：同志社大学・NTT西日本・ページワン 3社連携

### 1.2 目的・背景
- **ビジネス課題の明確化**
  - 従来の一律教育では学習者の個別ニーズに対応できない
  - 学習効果の測定・可視化が困難
  - 教員の個別指導負荷が高い

- **解決すべき問題の定義**
  - 学習者の理解度に応じた個別最適化学習の実現
  - AI支援による効率的な学習支援システムの構築
  - 教育効果の定量的評価・改善システムの提供

- **期待される効果・ROI**
  - 学習効果向上：平均理解度20%向上目標
  - 教員負荷軽減：個別指導時間50%削減目標
  - 学習時間効率化：学習時間20%短縮目標

### 1.3 スコープ
- **対象業務範囲**
  - 理解度評価・分析
  - 個別問題生成・採点
  - 学習パス推奨・支援
  - 学習進捗分析・レポート

- **対象ユーザー**
  - 学生：2,000名
  - 教員：10名
  - システム管理者：NTT西日本

- **除外事項**
  - DAIB学習機能（チャット・コンテンツ要約）
  - 外部システム連携（DAIB以外）
  - 多言語対応（日本語のみ）

## 2. システム要件

### 2.1 機能要件

#### 2.1.1 RAG（Retrieval-Augmented Generation）機能
- **データソース**
  - 対象データ形式：講義資料（PDF、PowerPoint）、理解度アンケート、学習履歴データ
  - データ量：講義資料約500ファイル、学習履歴データ2,000名分
  - データ更新頻度：講義資料は週次、学習履歴は即時更新
  - データアクセス権限：学生は個人データのみ、教員は担当クラスのみ

- **文書処理・前処理**
  - テキスト抽出方法：Azure Form Recognizer使用
  - チャンク分割戦略：500文字単位、段落保持
  - メタデータ抽出項目：講義回数、キーワード、難易度
  - 文書の品質チェック：OCR精度95%以上

- **ベクトル化・インデックス**
  - 使用する埋め込みモデル：text-embedding-ada-002
  - ベクトルデータベース：Azure Cognitive Search
  - インデックス更新方式：増分更新（日次バッチ）
  - 検索精度要件：関連性適合率85%以上

- **検索・取得機能**
  - 検索手法：ハイブリッド検索（ベクトル検索＋キーワード検索）
  - 取得文書数の上限：上位10件
  - 検索結果のランキング方式：関連性スコア＋理解度適合度
  - フィルタリング機能：講義回数、難易度、キーワード

#### 2.1.2 生成AI機能
- **使用モデル**
  - Azure OpenAI モデル：GPT-4.1mini（Japan East）
  - モデルバージョン：最新版（コスト考慮でアップデート判断）
  - 温度パラメータ設定：問題生成0.7、分析0.3
  - トークン数制限：入力8,192、出力4,096

- **プロンプト設計**
  - システムプロンプト：教育専門AIアシスタント
  - 役割定義：学習支援、問題生成、分析レポート作成
  - 出力形式指定：JSON構造化データ
  - 制約事項：教育的配慮、個人情報保護

#### 2.1.3 エージェント機能
- **エージェントタイプ**
  - マルチエージェント：7つの専門エージェント
  - 階層型エージェント：オーケストレーター＋専門エージェント

- **ツール・プラグイン**
  - 外部API連携：DAIBシステム、Microsoft Graph API
  - データベースアクセス：CosmosDB/SharePoint
  - ファイル操作：Azure Blob Storage
  - 計算機能：統計分析、機械学習

- **ワークフロー**
  - タスク分解：アンケート分析→問題生成→採点→フィードバック
  - 実行順序：並列処理＋依存関係管理
  - 条件分岐：理解度レベル別処理
  - エラーハンドリング：リトライ機構＋フォールバック

### 2.2 非機能要件

#### 2.2.1 性能要件
- **応答時間**：通常時3秒以内、ピーク時5秒以内
- **同時接続数**：500ユーザー同時接続対応
- **スループット**：1,000リクエスト/分
- **可用性目標**：99.5%（月間ダウンタイム3.6時間以内）

#### 2.2.2 セキュリティ要件
- **認証・認可**
  - Azure AD連携：シングルサインオン
  - ロールベースアクセス制御：学生・教員・管理者

- **データ保護**
  - 暗号化：保存時AES-256、転送時TLS1.3
  - 個人情報保護：GDPR・個人情報保護法準拠
  - 機密情報の取り扱い：学習データの匿名化

- **監査**
  - アクセスログ：全API呼び出し記録
  - 操作ログ：ユーザー行動追跡
  - 異常検知：AI使用パターン監視

#### 2.2.3 運用要件
- **監視**
  - システム監視項目：CPU、メモリ、ネットワーク、API応答時間
  - アラート設定：しきい値超過時の自動通知
  - ダッシュボード：Azure Monitor使用

- **バックアップ・復旧**
  - バックアップ方式：日次フルバックアップ＋時間別増分
  - 復旧時間目標（RTO）：4時間以内
  - 復旧ポイント目標（RPO）：1時間以内

## 3. Azure構成要件

### 3.1 Azure OpenAI Service
- **デプロイメント地域**：Japan East
- **価格ティア**：Standard（従量課金）
- **レート制限設定**：1,000 TPM（Token Per Minute）
- **コスト管理**：月次予算アラート設定

### 3.2 関連Azureサービス
- **Azure Cognitive Search**
  - 検索サービスティア：Standard S1
  - インデックス設計：講義データ、学習履歴、問題データ
  - スキル設定：カスタム分析スキル

- **Azure Storage**
  - ストレージアカウント種別：General Purpose v2
  - データ保存方式：Hot tier（頻繁アクセス）
  - アクセスポリシー：RBAC＋SAS token

- **Azure Functions / App Service**
  - コンピューティングリソース：App Service Plan P1V2
  - スケーリング設定：Auto-scaling（CPU 70%）
  - 環境分離：開発・テスト・本番環境

### 3.3 ネットワーク・セキュリティ
- **VNet構成**：プライベートサブネット構成
- **プライベートエンドポイント**：データベース・ストレージ接続
- **ファイアウォール設定**：Azure Firewall
- **NSG設定**：最小権限アクセス制御

## 4. ユーザーインターフェース要件

### 4.1 フロントエンド
- **UI/UX要件**
  - 対応デバイス：デスクトップ、タブレット（モバイル対応はPh3）
  - ブラウザ対応：Chrome、Edge、Firefox、Safari
  - アクセシビリティ：WCAG 2.1 AA準拠

- **機能要件**
  - チャットインターフェース：リアルタイム対話
  - ファイルアップロード：講義資料アップロード
  - 履歴管理：学習履歴・問題解答履歴
  - 設定画面：個人設定・通知設定

### 4.2 API要件
- **REST API仕様**：OpenAPI 3.0準拠
- **認証方式**：Bearer Token（Azure AD）
- **レート制限**：ユーザー別1,000リクエスト/時
- **ドキュメント化**：Swagger UI提供

## 5. 開発・運用要件

### 5.1 開発環境
- **開発言語・フレームワーク**
  - バックエンド：Python FastAPI
  - フロントエンド：HTML/CSS/JavaScript → React（段階移行）
  - データベース：CosmosDB SQL API

- **CI/CD パイプライン**：Azure DevOps
- **コード管理**：Azure Repos（Git）
- **テスト環境**：開発・テスト・本番の3環境

### 5.2 品質保証
- **テスト要件**
  - 単体テスト：カバレッジ80%以上
  - 統合テスト：API・エージェント連携テスト
  - パフォーマンステスト：2,000ユーザー負荷テスト
  - セキュリティテスト：脆弱性スキャン

- **品質指標**
  - 回答精度：理解度分析90%以上
  - 適合率・再現率：問題推奨85%以上
  - ユーザー満足度：80%以上

### 5.3 運用・保守
- **運用体制**
  - 1次対応：NTT西日本（平日9-17時）
  - 2次対応：ページワン（緊急時24時間）
  - 3次対応：同志社大学（要件確認・検証）

- **障害対応手順**
  - 重要度1：1時間以内対応開始
  - 重要度2：4時間以内対応開始
  - 重要度3：翌営業日対応開始

- **定期メンテナンス**：月1回（土日実施）
- **ユーザーサポート**：FAQ・チャットサポート

## 6. コスト・スケジュール

### 6.1 コスト要件
- **初期構築費用**：開発費・環境構築費
- **月次運用費用**：Azure利用料・人件費
- **Azure OpenAI使用料**：月次予算管理（上限設定）
- **人件費**：NTT西日本（運用）＋ページワン（保守）

### 6.2 スケジュール
- **Ph1（2025/8-10）**：設計・基本機能開発・テスト
- **Ph2（2025/10-2026/3）**：機能拡張・連携開発・テスト
- **Ph3（2026/3-8）**：最適化・運用準備・本番稼働

## 7. リスク・制約事項

### 7.1 リスク
- **技術的リスク**
  - AI品質変動：モデル更新による出力品質変化
  - スケーラビリティ：2,000名同時利用時の性能低下
  - データ品質：学習データの不整合・欠損

- **コストリスク**
  - Azure OpenAI使用料急増
  - 開発工数オーバー
  - 運用コスト予算超過

- **スケジュールリスク**
  - 3社連携による調整遅延
  - 技術的課題による開発遅延
  - テスト・検証期間不足

- **品質リスク**
  - 少数開発体制での品質保証
  - AI出力品質の保証困難
  - セキュリティ脆弱性

### 7.2 制約事項
- **法的制約**：個人情報保護法・GDPR準拠
- **技術的制約**：Azure OpenAI利用制限・Japan East制約
- **予算制約**：月次運用費用上限
- **期間制約**：12ヶ月での完成・3段階リリース

## 8. 承認・確認

### 8.1 ステークホルダー承認
- **ビジネス責任者**：同志社大学（要件承認）
- **技術責任者**：NTT西日本（技術仕様承認）
- **セキュリティ責任者**：NTT西日本（セキュリティ承認）
- **運用責任者**：NTT西日本（運用仕様承認）

### 8.2 最終確認事項
- **要件の完全性**：全機能要件の網羅性確認
- **実現可能性**：技術的実現可能性・開発体制妥当性
- **コスト妥当性**：予算内での実現可能性
- **スケジュール妥当性**：3段階リリース計画の実現性

---

## 付録：7つのエージェント詳細仕様

### A1. 理解度分析エージェント
- **Ph1実装**：5段階評価分析、基本統計処理
- **Ph2実装**：高度な学習パターン分析、予測モデル

### A2. 個別問題生成エージェント
- **Ph1実装**：基本的な問題生成（選択式・穴埋め）
- **Ph2実装**：記述式問題生成、難易度調整

### A3. 自動採点・フィードバックエージェント
- **Ph2実装**：自動採点機能、個別フィードバック生成

### A4. 学習パス作成・支援エージェント
- **Ph2実装**：個別学習パス生成、学習順序最適化

### A5. 学生用分析・レポートエージェント
- **Ph1実装**：基本ダッシュボード、学習統計表示
- **Ph2実装**：詳細分析レポート、学習提案

### A6. 教員用分析・レポートエージェント
- **Ph1実装**：基本統計表示、学生管理機能
- **Ph2実装**：高度な分析、理解度ヒートマップ

### A7. 通知・プロセス管理エージェント
- **Ph3実装**：通知システム、プロセス管理、システム監視

---

**作成日**：2025年7月16日  
**作成者**：ページワン  
**承認者**：同志社大学・NTT西日本・ページワン  
**バージョン**：1.0